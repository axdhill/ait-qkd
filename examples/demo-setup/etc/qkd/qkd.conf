# ------------------------------------------------------------
# This is a pipeline config file
#
# Autor: Oliver Maurhart, <oliver.maurhart@ait.ac.at>
# 
# Copyright (C) 2012-2015 AIT Austrian Institute of Technology
# AIT Austrian Institute of Technology GmbH
# Donau-City-Strasse 1 | 1220 Vienna | Austria
# http://www.ait.ac.at
#
# Any line starting with '#' is ignored
# ------------------------------------------------------------


# ----------------------------------------
# this is about the modules we operate on
#
#   modules.path .......... where to look for these
#                           files in ascending order
#                           paths are separated by colon ":"
#
#   modules.pipeline ...... name of the pipeline to start
#                           this will overwrite each module's
#                           pipeline setting
#
#   modules.start ......... space separated list of modules to start
#                           the modules are started and interconnected in
#                           the order specified
#
[pipeline]
modules.path = .:./bin:/usr/local/bin:/usr/bin
modules.pipeline = default
modules.start = qkd-bb84 qkd-cascade qkd-confirmation qkd-privacy-amplification qkd-auth


# ----------------------------------------
# per module configuration
#
# each key here is of the form:
#
#   MODULE[.ROLE].NAME
#
# MODULE is a name which is to be understood by
# module implmentation.
#
# ROLE is either "alice" or "bob". If ROLE is
# omitted than the value should be applied regardless
# of the concrete role.
#
# Default values:
#
#   Every module starts with some defaul values.
#   These are:
#   
#       MODULE.alice.url_pipe_in = stdin://
#       MODULE.alice.url_pipe_out = stdout://
#       MODULE.bob.url_pipe_in = stdin://
#       MODULE.bob.url_pipe_out = stdout://
#       MODULE.pipeline = default
#       MODULE.synchronize_keys = true
#       MODULE.synchronize_ttl = 10
#
[module]


# 0. cat
cat.alice.file_url = file:///tmp/qkd/cat_keys.alice
cat.alice.url_pipe_out = ipc:///tmp/qkd/auth_pre.alice.in
cat.bob.file_url = file:///tmp/qkd/cat_keys.bob
cat.bob.url_pipe_out = ipc:///tmp/qkd/auth_pre.bob.in
#cat.pipeline = default
cat.loop = false


# 1. bb84
bb84.alice.url_peer = tcp://bob:7110
bb84.alice.url_pipe_in = ipc:///tmp/qkd/bb84.alice.in
bb84.alice.url_pipe_out = ipc:///tmp/qkd/ldpc.alice.in
bb84.bob.url_listen = tcp://bob:7110
bb84.bob.url_pipe_in = ipc:///tmp/qkd/bb84.bob.in
bb84.bob.url_pipe_out = ipc:///tmp/qkd/ldpc.bob.in
#bb84.pipeline = default
#bb84.synchronize_keys = true
#bb84.synchronize_ttl = 10
bb84.key_id_pattern = 0/0
bb84.rawkey_length = 1024


# 2. ldpc
ldpc.alice.url_peer = tcp://bob:7140
ldpc.alice.url_pipe_in = ipc:///tmp/qkd/ldpc.alice.in
ldpc.alice.url_pipe_out = ipc:///tmp/qkd/buffer.alice.in
ldpc.bob.url_listen = tcp://bob:7140
ldpc.bob.url_pipe_in = ipc:///tmp/qkd/ldpc.bob.in
ldpc.bob.url_pipe_out = ipc:///tmp/qkd/buffer.bob.in
#ldpc.pipeline = default
#ldpc.synchronize_keys = true
#ldpc.synchronize_ttl = 10
ldpc.code = 0
ldpc.encoder = 0
ldpc.decoder = 0
ldpc.code_database_url = 8k/code-database-8k.txt
ldpc.key_width = 1024
ldpc.max_iterations = 100
ldpc.net_timeout = 100000


# 3. buffer
buffer.alice.url_peer = tcp://bob:7160
buffer.alice.url_pipe_in = ipc:///tmp/qkd/buffer.alice.in
buffer.alice.url_pipe_out = ipc:///tmp/qkd/confirmation.alice.in
buffer.bob.url_listen = tcp://bob:7160
buffer.bob.url_pipe_in = ipc:///tmp/qkd/buffer.bob.in
buffer.bob.url_pipe_out = ipc:///tmp/qkd/confirmation.bob.in
#buffer.pipeline = default
#buffer.synchronize_keys = true
#buffer.synchronize_ttl = 10
buffer.min_key_size = 10000


# 4. confirmation
confirmation.alice.url_peer = tcp://bob:7150
confirmation.alice.url_pipe_in = ipc:///tmp/qkd/confirmation.alice.in
confirmation.alice.url_pipe_out = ipc:///tmp/qkd/privacy-amplification.alice.in
confirmation.bob.url_listen = tcp://bob:7150
confirmation.bob.url_pipe_in = ipc:///tmp/qkd/confirmation.bob.in
confirmation.bob.url_pipe_out = ipc:///tmp/qkd/privacy-amplification.bob.in
#confirmation.synchronize_keys = true
#confirmation.synchronize_ttl = 10
#confirmation.pipeline = default
confirmation.rounds = 10


# 5. privacy-amplification
privacy-amplification.alice.url_peer = tcp://bob:7170
privacy-amplification.alice.url_pipe_in = ipc:///tmp/qkd/privacy-amplification.alice.in
privacy-amplification.alice.url_pipe_out = ipc:///tmp/qkd/auth_post.alice.in
privacy-amplification.bob.url_listen = tcp://bob:7170
privacy-amplification.bob.url_pipe_in = ipc:///tmp/qkd/privacy-amplification.bob.in
privacy-amplification.bob.url_pipe_out = ipc:///tmp/qkd/auth_post.bob.in
#privacy-amplification.pipeline = default
#privacy-amplification.synchronize_keys = true
#privacy-amplification.synchronize_ttl = 10
#privacy-amplification.reduction_rate = 0.9
privacy-amplification.security_bits = 100

